<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ARTS ç¬¬ä¸‰å‘¨ Â· Haysâ€˜</title><meta name="description" content="ARTS ç¬¬ä¸‰å‘¨ - Hays Ren"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Haysâ€˜"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://weibo.com/5343481486" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/roti13island" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/categories/" target="_self" class="nav-list-link">CATEGORIES</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ARTS ç¬¬ä¸‰å‘¨</h1><div class="post-info">Jun 21, 2020</div><div class="post-content"><h2 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h2><p><a href="https://leetcode-cn.com/problems/find-the-duplicate-number/" target="_blank" rel="noopener">LeetCode 287: å¯»æ‰¾é‡å¤æ•°</a></p>
<blockquote>
<p>ç»™å®šä¸€ä¸ªåŒ…å«<code>n + 1</code>ä¸ªæ•´æ•°çš„æ•°ç»„<code>nums</code>ï¼Œå…¶æ•°å­—éƒ½åœ¨ 1 åˆ° nä¹‹é—´ï¼ˆåŒ…æ‹¬ 1 å’Œ nï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚å‡è®¾åªæœ‰ä¸€ä¸ªé‡å¤çš„æ•´æ•°ï¼Œæ‰¾å‡ºè¿™ä¸ªé‡å¤çš„æ•°ã€‚<br><strong>ç¤ºä¾‹ :</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: [1,3,4,2,2]</span><br><span class="line">è¾“å‡º: 2</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><strong>æ€è·¯ï¼š</strong><br>è¯¥ç®—æ³•å¯ç”¨<strong>äºŒåˆ†æ³•</strong>ã€<strong>äºŒè¿›åˆ¶</strong>æˆ–<strong>å¿«æ…¢æŒ‡é’ˆ</strong>ç­‰ç­‰æ–¹æ³•æ¥è§£ï¼Œæœ¬æ¬¡ä¸»è¦è®°å½•ä¸€ä¸‹<strong>å¿«æ…¢æŒ‡é’ˆ</strong>çš„æ–¹æ³•ã€‚<br><strong>å¿«æ…¢æŒ‡é’ˆ</strong>çš„æ–¹æ³•ä¸»è¦å€Ÿé‰´äº† <strong>Floyd åˆ¤åœˆç®—æ³•</strong>ï¼Œè¯¥ç®—æ³•ä¸»è¦ç”¨äºæ£€æµ‹é“¾è¡¨æ˜¯å¦æœ‰ç¯ã€‚åœ¨æœ¬é¢˜ä¸­å¯¹<code>nums</code>å»ºå›¾ï¼Œå¯å°†é—®é¢˜ç­‰ä»·ä¸ºï¼š <a href="https://leetcode-cn.com/problems/linked-list-cycle-ii/solution/huan-xing-lian-biao-ii-by-leetcode/" target="_blank" rel="noopener">LeetCode142:  ç¯å½¢é“¾è¡¨ II</a>  ï¼Œå¯åˆ†åˆ«è®¾ç½®å¿«æ…¢æŒ‡é’ˆï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œæ ¹æ® <strong>Floyd åˆ¤åœˆç®—æ³•</strong>ä¸¤æŒ‡é’ˆåœ¨æœ‰ç¯çš„æƒ…å†µä¸‹ä¸€å®šä¼šç›¸é‡ï¼Œç›¸é‡åå°†æ…¢æŒ‡é’ˆæ”¾ç½®èµ·ç‚¹ï¼Œç„¶åä¸¤ä¸ªæŒ‡é’ˆæ¯æ¬¡åŒæ—¶èµ°ä¸€æ­¥ï¼Œç›¸é‡ç‚¹ä¾¿æ˜¯ç­”æ¡ˆã€‚</p>
<p><strong>è§£ç­”ï¼š</strong><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findDuplicate</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> fast = nums[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> slow = nums[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">repeat</span> &#123;</span><br><span class="line">        fast = nums[nums[fast]]</span><br><span class="line">        slow = nums[slow]</span><br><span class="line">    &#125; <span class="keyword">while</span> (fast != slow)</span><br><span class="line"></span><br><span class="line">    slow = nums[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">while</span>(slow != fast) &#123;</span><br><span class="line">        slow = nums[slow]</span><br><span class="line">        fast = nums[fast]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> slow</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Review"><a href="#Review" class="headerlink" title="Review"></a>Review</h2><p><a href="https://allegro.tech/2014/12/swift-method-dispatching.html" target="_blank" rel="noopener">Swift Method Dispatching</a></p>
<p><strong>Swift</strong> ä½œä¸ºä¸€é—¨é™æ€è¯­è¨€ï¼Œå…¶åœ¨æ–¹æ³•æ´¾å‘ä¸Šçš„æ€§èƒ½è¡¨ç°è¦å¼ºäº <strong>OC</strong> ä¸å°‘ï¼Œæœ¬æ–‡ä¸­ä¸»è¦ä»‹ç»äº† <strong>Swift</strong> çš„æ–¹æ³•æ´¾å‘æœºåˆ¶ã€‚</p>
<p>åœ¨ <strong>OC</strong> ä¸­ï¼Œ<strong>clang</strong> ä¼šå°†æ–¹æ³•è°ƒç”¨ç¿»è¯‘æˆå¯¹<code>objc_msgSend</code>è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨ï¼Œä¼ å…¥ç›¸åº”çš„<code>target</code>ã€<code>SEl</code>ä»¥åŠå‚æ•°ï¼Œè¯¥æ–¹æ³•æ˜¯ç”±æ±‡ç¼–å®ç°çš„ï¼Œè´Ÿè´£<strong>OC</strong>ä¸­çš„æ–¹æ³•æ´¾å‘ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">id objc_msgSend ( id obj, SEL op, â€¦ )</span><br><span class="line">&#123;</span><br><span class="line">    Class c = object_getClass(obj);</span><br><span class="line">    IMP imp = CacheLookup(c, op);</span><br><span class="line">    if (!imp) &#123;</span><br><span class="line">        imp = class_getMethodImplementation(c, op);</span><br><span class="line">    &#125;</span><br><span class="line">    jump imp(obj, op, â€¦);]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä¸­ï¼Œå½±å“æ•ˆç‡çš„æœ€å¤§å› ç´ åœ¨äºæ‰¾åˆ°å…·ä½“çš„æ–¹æ³•å®ç°<code>IMP</code>ï¼Œå¦‚æœæ–¹æ³•ç¼“å­˜å‘½ä¸­ï¼Œé‚£ä¹ˆæ•ˆç‡ä¸ŠåŸºæœ¬ç­‰åŒäºåœ¨<code>hashMap</code>ä¸­å–å€¼ï¼Œè¿™ç§æƒ…å†µè¿˜å¥½ï¼Œä½†å¦‚æœæœªå‘½ä¸­ï¼Œåˆ™éœ€è¦å»æ²¿ç€ç»§æ‰¿ä½“ç³»åœ¨ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¯»æ‰¾å¯¹åº”çš„å®ç°å¹¶åŠ å…¥ç¼“å­˜ï¼Œå†è·³åˆ°è¯¥å®ç°æ‰§è¡Œå…·ä½“å‡½æ•°ï¼Œè¿™æ ·çš„æ´¾å‘æ–¹å¼ç›¸å¯¹è¾ƒæ…¢ã€‚å› æ­¤<code>objc_msgSend</code>ä¹Ÿè¢«ç§°ä¸ºè·³æ¿å‡½æ•°ã€‚</p>
<p>åœ¨ <strong>Swift</strong> ä¸­ï¼Œä½¿ç”¨äº† <strong>Virtual Method Table</strong> æ¥æ”¯æŒè¿è¡Œæ—¶çš„æ–¹æ³•ç»‘å®šï¼Œæ–‡ç« é€šè¿‡å¯¹ <strong>SIL</strong> çš„åˆ†æå‘ç° <strong>vtable</strong> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª key ä¸ºæ–¹æ³•åï¼Œvalue ä¸ºæ–¹æ³•å®ç°çš„å­—å…¸ï¼Œè€Œé€šè¿‡æ±‡ç¼–ä»£ç å¯ä»¥çœ‹åˆ° <strong>Swift</strong> ä»£ç å‡ ä¹åšåˆ°äº†å°†è°ƒç”¨æ–¹æ³•ç›´æ¥æ˜ å°„åˆ°å¤„ç†å™¨æŒ‡ä»¤ï¼Œå¹¶å°†è°ƒç”¨å¯¹è±¡å­˜å…¥å¯„å­˜å™¨ä¸­ã€‚é€šè¿‡ä¼ å…¥å¯¹è±¡ä¸­æŒ‡å‘ <code>metadata</code> çš„æŒ‡é’ˆæ‰¾åˆ°ä¿å­˜å…¶ç±»ä¿¡æ¯çš„ç»“æ„ä½“ï¼Œè¿›è€Œé€šè¿‡åç§»é‡æ‰¾åˆ°ç›¸åº”çš„æ–¹æ³•ã€‚</p>
<p>å½“æ‰“å¼€ç¼–è¯‘æœŸä¼˜åŒ–é€‰é¡¹åï¼Œ<strong>Swift</strong> ä»£ç æ‰§è¡Œé€Ÿåº¦å¯èƒ½æ›´å¿«ï¼ŒåŸå› åœ¨äºï¼š</p>
<ul>
<li>å½“ç¼–è¯‘å™¨çŸ¥é“ç›®æ ‡å¯¹è±¡çš„å…·ä½“ç±»å‹åï¼Œnon-final æ–¹æ³•å¯è¢«ç›´æ¥è°ƒç”¨</li>
<li>ç¼–è¯‘æœŸä¼šç”¨å†…è”çš„æ–¹å¼ç›´æ¥å°†æ–¹æ³•å®ç°å†…è”è‡³æ–¹æ³•è°ƒç”¨çš„åœ°æ–¹ï¼Œä»è€Œçœå»äº†å‡½æ•°è°ƒç”¨çš„å¼€é”€</li>
</ul>
<h2 id="Tip"><a href="#Tip" class="headerlink" title="Tip"></a>Tip</h2><p>æœ¬å‘¨ä¾æ—§è®°å½• <strong>Swift</strong> çš„æ–°ç‰¹æ€§ï¼Œç‰ˆæœ¬æ¥åˆ°<code>5.3</code>ã€‚</p>
<h4 id="Multi-pattern-catch-clauses"><a href="#Multi-pattern-catch-clauses" class="headerlink" title="Multi-pattern catch clauses"></a>Multi-pattern catch clauses</h4><p>ç®€å•æ¥è¯´ï¼Œä¸€ä¸ª<code>catch</code>ä»£ç å—å¯ä»¥ handle å¤šç§é”™è¯¯ç±»å‹äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">enum TemperatureError: Error &#123;</span><br><span class="line">    case tooCold, tooHot</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">do &#123;</span><br><span class="line">    let result = try checkReactorOperational()</span><br><span class="line">    print(â€œResult: \(result)â€)</span><br><span class="line">&#125; catch TemperatureError.tooHot, TemperatureError.tooCold &#123;</span><br><span class="line">    print(â€œShut down the reactor!â€)</span><br><span class="line">&#125; catch &#123;</span><br><span class="line">    print(â€œAn unknown error occurred.â€)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="Multiple-trailing-closures"><a href="#Multiple-trailing-closures" class="headerlink" title="Multiple trailing closures"></a>Multiple trailing closures</h4><p>å¤šä¸ªå°¾éšé—­åŒ…ä¹Ÿè¢«æ”¯æŒäº†~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// Before</span><br><span class="line">struct NewContentView: View &#123;</span><br><span class="line">    @State private var showOptions = false</span><br><span class="line"></span><br><span class="line">    var body: some View &#123;</span><br><span class="line">        Button &#123;</span><br><span class="line">            self.showOptions.toggle()</span><br><span class="line">        &#125; label: &#123;</span><br><span class="line">            Image(systemName: &quot;gear&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// After</span><br><span class="line">struct NewContentView: View &#123;</span><br><span class="line">    @State private var showOptions = false</span><br><span class="line"></span><br><span class="line">    var body: some View &#123;</span><br><span class="line">        Button &#123;</span><br><span class="line">            self.showOptions.toggle()</span><br><span class="line">        &#125; label: &#123;</span><br><span class="line">            Image(systemName: &quot;gear&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="Synthesized-Comparable-conformance-for-enums"><a href="#Synthesized-Comparable-conformance-for-enums" class="headerlink" title="Synthesized Comparable conformance for enums"></a>Synthesized Comparable conformance for enums</h4><p>å®ç°<code>Comparable</code>çš„æšä¸¾å¯ä»¥ç”¨æ¥æ¯”å¤§å°äº†ï¼Œå¦‚æœå¸¦æœ‰çš„å…³è”å€¼ä¹Ÿæ˜¯<code>Comparable</code>çš„è¯ï¼Œä¹Ÿæ˜¯å¯ä»¥æ¯”çš„å“¦~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">enum WorldCupResult: Comparable &#123;</span><br><span class="line">    case neverWon</span><br><span class="line">    case winner(stars: Int)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let americanMen = WorldCupResult.neverWon</span><br><span class="line">let americanWomen = WorldCupResult.winner(stars: 4)</span><br><span class="line">let japaneseMen = WorldCupResult.neverWon</span><br><span class="line">let japaneseWomen = WorldCupResult.winner(stars: 1)</span><br><span class="line"></span><br><span class="line">let teams = [americanMen, americanWomen, japaneseMen, japaneseWomen]</span><br><span class="line">let sortedByWins = teams.sorted()</span><br><span class="line">print(sortedByWins) // americanMen japaneseMen japaneseWomen americanWomen</span><br></pre></td></tr></table></figure></p>
<h2 id="Share"><a href="#Share" class="headerlink" title="Share"></a>Share</h2><p><a href="https://mp.weixin.qq.com/s/nh5qifdneF_Y3xOJBy_ipg" target="_blank" rel="noopener">å·¦è€³æœµè€—å­ï¼šä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ</a></p>
<p>å› ä¸ºæ–°å…¬å¸çš„é¡¹ç›®ä½¿ç”¨ä¸€äº› <strong>RxSwift</strong>ï¼Œè€Œè‡ªå·±æœ¬èº«å¯¹è¿™å—åªæ˜¯ä¸€çŸ¥åŠè§£ï¼Œå¸Œæœ›ä»Šåèƒ½åˆ©ç”¨ä¸€äº›æ—¶é—´æ¥æŠŠ<strong>å‡½æ•°å¼å“åº”å¼ç¼–ç¨‹</strong>ä»¥åŠ <strong>MVVM</strong> åšä¸€ä¸ªç³»ç»Ÿçš„å­¦ä¹ å’Œå®è·µï¼Œå°±ä»¥è¿™ç¯‡è€—å­å”çš„<strong>å‡½æ•°å¼ç¼–ç¨‹</strong>ä½œä¸ºå¼€å§‹å§ã€‚</p>
<p>æœ¬æ–‡å°±<strong>å‡½æ•°å¼ç¼–ç¨‹</strong>åšäº†è¯¦ç»†çš„ä»‹ç»å¹¶é…ä»¥ç”ŸåŠ¨çš„ä»£ç ç¤ºä¾‹ï¼Œä»å…¶å†å²åˆ°ç‰¹ç‚¹å’Œåº”ç”¨çš„æŠ€æœ¯ï¼Œè¿˜ä»‹ç»äº†çº¯å‡½æ•°å¼è¯­è¨€ <strong>Scheme</strong>ï¼Œæœ€åé€šè¿‡å¯¹æ¯”çš„æ–¹å¼è®²æ˜äº†ä½•ä¸ºå‡½æ•°å¼ç¼–ç¨‹æ€ç»´æ–¹å¼ã€‚è¯»äº†ä¸‰éï¼Œæ¯æ¬¡éƒ½æœ‰æ–°çš„æ„Ÿå—ï¼Œè®©äººè¿«ä¸åŠå¾…æƒ³å»åŠ¨æ‰‹å®è·µã€‚ğŸ˜œ</p>
</div></article></div></main><footer><div class="paginator"><a href="/2020/06/27/ARTS_week_4/" class="prev">PREV</a><a href="/2020/06/13/ARTS_week_2/" class="next">NEXT</a></div><div class="copyright"><p>Â© 2019 - 2020 <a href="http://yoursite.com">Hays Ren</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>